<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Traffic Simulation 1</title>
    <script type="text/javascript"
            src = "simpleGame.js"></script>
	<script type="text/javascript" src = "controller.js"></script>
	<script type="text/javascript" src = "spawner.js"></script>
        <script type="text/javascript" src = "car.js"></script>
	
    
    <script type="text/javascript">
        var control;
        var spawn;
	var sim;

	//Sim constants
	var SITUATION = 1;
	var TRAINING = 0;
	var CONTROLLING = 1;
	var MONITORING = 2;
	var runTimes = 100;
	var curRun = 0;
        
        function init()
        {
	    sim = new Scene();
	    sim.setSize(1500,150);
			
			//Initialze controller
            control = new Controller(TRAINING);
			control.clearData();
			control.resetSimulation();
			
            //Initialize spawner with the appropriate simulation constant
            spawn = new Spawner(SITUATION, control);
			spawn.setPosition(750, 75);
			
			sim.start();
		}
        
        function update()
        {
		   if (curRun < runTimes) {
			   spriteList.update();
			   control.update();
			   
			   if(control.simulationFinished) {
					control.resetSimulation();
					spawn.reset();
					curRun ++;
			   } // end if
		   } // end if
        }
    </script>

</head>

<body onload="init()">
    
</body>
</html>